<!DOCTYPE html>
<HTML>
<HEAD>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8" />
  <!-- <link href="/web/css/bootstrap3.min.css" type="text/css" rel="stylesheet" />  
  <script src="/web/js/vue.min.js"></script> -->
  <script>
  </script>
  <TITLE></TITLE>
</HEAD>

<style>
  div#el_loading {
    z-index: 2; 
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(20deg, cyan, navy);
    color: white;
    text-align: center;
    padding-top: 40vh;
    font-size: xx-large;
  }

  table {
    border-collapse: collapse;
  }

  td {
    border: 1px solid grey;
    padding-right: 3px;
    padding-left:  3px;
  }

  .modal {
    position: fixed;
    width: 60%; 
    padding: 4px;
    background: white;
    border: 1px solid grey;
    height: 90vh;
  }

  .modal .header {
    background-color: lightgray; 
    text-align: center;
    cursor: move;
  }

  .modal .btn_close {
    float: right;
    margin-left: -5vw;
  }

  .modal .body {
    height: 87vh;
    overflow-y: scroll;
  }
</style>
<style id="style__text_title">
  text:has(title) {
    /* fill: darkred; */
  }
</style>

<body>
  <div id="el_loading" hidden>
    Грузимся...
  </div>
  <include hidden>
    <!-- <iframe class="stardata" src="../map/stars.json"></iframe> -->

    <iframe class=tech src2="tech/Biology.graphml"></iframe>
    <iframe class=tech src2="tech/Industry.graphml"></iframe>
    <iframe class=tech src2="tech/Military.graphml"></iframe>
    <iframe class=tech src2="tech/Science.graphml"></iframe>
    <iframe class=tech src2="tech/Sociology.graphml"></iframe>
  </include>
  <style id="highlight_css"></style>

  <!-- <div style="position: absolute; left: 50px; top: 50px; width: 50%; height: 50%;" hidden>
    <svg viewBox="0 0 500 100" id="svg_graph" class="chart">
      <polyline
         fill="none"
         stroke="#0074d9"
         stroke-width="2"
         points="
           0,120
           20,60
           40,80
           60,20"/>
    </svg>
  </div> -->
  <!-- <canvas id=canvas style="position: absolute; left: 5; top: 5;"></canvas> -->

  <div id="el_selected_tech_wrapper" hidden class="modal"
    style="left: 260px; top: 50px; width: 50%;">
    <div id="el_selected_tech_header" class="header">
      <strong>Парсер</strong>
      <button onclick="getEl('el_selected_tech_wrapper').hidden = true" class="btn_close">Close</button>
    </div>

    <div class="body">
      <div id="el_selected_tech_list" contenteditable="true"></div>
      <br>

      <strong>Результат</strong>
      <button onclick="playerPost.countTechStudyResult()"->Parse</button>
      <div id="el_tech_result_list" contenteditable="true"></div>
      
      <strong>Раскладка по типам</strong>
      <div id="el_tech_by_type_list"></div>
    </div>
  </div>
  
  <div id="el_reports_wrapper" hidden class="modal"
    style="right: 50px; top: 50px;">
    <div id="el_reports_header" class="header">
      <strong>Отчеты</strong>
      <button onclick="Analysis.closeReports()" class="btn_close">Close</button>
      <button id="el_reports_home" onclick="Analysis.drawReportsList()">Full list</button>
    </div>
    <div id="el_reports_list" class="body"></div>
  </div>

  <div id="el_unitcreator_wrapper" hidden class="modal"
    style="right: 10px; top: 30px;">
    <div id="el_unitcreator_header" class="header">
      <strong>Unit Creator</strong>
      <button onclick="UnitCreator.close()" class="btn_close">Close</button>
    </div>
    <div id="el_uc_body" class="body">
      <div id="el_uc_input">
        Тип корпуса: <select id="el_uc_hull"></select>
        <br>
        <br>
        <input id="el_uc_modules_search" list="el_uc_modules_datalist" placeholder="Поиск модуля">
        <datalist id="el_uc_modules_datalist"></datalist>  
        <br>
        <br>
        <textarea id="el_uc_modules" placeholder="Модули" style="height: 8em; width: 80%;" title="не знаешь что делаешь - не трогай"></textarea>
      </div>
      <br>
      <button onclick="UnitCreator.processInput()">Process</button>
      <br>
      <br>
      <div id="el_uc_unit">

      </div>
    </div>
  </div>

  <div id="el_help" class="modal" hidden style="width: auto;">
    <div id="el_help_header" class="header">
      Помощь
      <button onclick="el_help.hidden=true" class="btn_close">Close</button>
    </div>
    <img src="xlam/_Cheatsheet.jpg" alt="" srcset="">
  </div>
  
  <!-- https://codepen.io/edmundojr/pen/xOYJGw -->
  <svg viewbox="-300 -100 2200 1450" id=svg style="background-color: white;"
  xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  </svg>

  <div id=el_GUI>
    <div id="" style="position: fixed; left: 8px; bottom: 8px;">
      <button onclick="el_help.hidden=false" accesskey="F1">Help</button>
      <br>
      <button onclick="UnitCreator.open()" accesskey="C">Unit Creator</button>
      <br>
      <button onclick="Analysis.drawReportsList()" accesskey="R">Reports</button>
      <br>
      <button onclick="savingOps.saveAllTechAsPng()" title="Save all tech trees as png" accesskey="D">Dump</button>
      <button onclick="playerPost.prompt()" title="" accesskey="U">Userpost</button>
      <!-- <br>
      <button onclick="parseDoc.GDocToJS()" title="">GDoc to JS(ON)</button> -->
      <!-- <button onclick="savingOps.openAsPng()" title="Open current tree as png in new tab">Png</button> -->
      <section id=players_selection style="background-color: white;">
        <label>
          <input type="checkbox" id="Беглецы"> Беглецы
        </label><br>
        <label>
          <input type="checkbox" id="Кошкодевочки Карины"> Кошкодевочки Карины
        </label><br>
        <label>
          <input type="checkbox" id="Юнитологическая федерация"> Юнитологическая федерация
        </label><br>
        <label>
          <input type="checkbox" id="Инженеры"> Инженеры
        </label><br>
        <label>
          <input type="checkbox" id="ЭНГЕЛЬС-1"> ЭНГЕЛЬС-1
        </label><br>
        <label>
          <input type="checkbox" id="Илоний Джобс"> Илоний Джобс
        </label><br>
      </section>
      <section id=doc_section>
        <button onclick="parseDoc.file(event)" style="padding: 12px;" accesskey="P">Parse clipboard</button>
        <button onclick="parseDoc.redoLast()" style="padding: 12px;">Redo last parse</button>
      </section>
    </div>
    <section id="tech_tree_buttons" style="position: fixed; right: 8px; bottom: 8px;">
      <button onclick='drawTree("Biology")'   style="background-color: rgb(204, 255, 204);" accesskey="1">Biology</button>
      <button onclick='drawTree("Industry")'  style="background-color: rgb(255, 204,   0);" accesskey="2">Industry</button>
      <button onclick='drawTree("Military")'  style="background-color: rgb(255, 153, 102);" accesskey="3">Military</button>
      <button onclick='drawTree("Science")'   style="background-color: rgb(153, 204, 255);" accesskey="4">Science</button>
      <button onclick='drawTree("Sociology")' style="background-color: rgb(204, 153, 255);" accesskey="5">Sociology</button>
    </section>
  </div>
  <button style="position: fixed; left: 8px; top: 50%;" onclick="el_GUI.hidden=!el_GUI.hidden" id="btn_toggleUI" accesskey="T" title="Toggle GUI">&ofcir;</button>
  <div style="text-align: center;">
    <a href="https://github.com/RollingHog/wr-stardust">Github</a>
  </div>
</body>

<script id="el_data_players" src2="data/playersData.js"></script>
<script src="src/common.js"></script>
<script src="src/draw.js"></script>

<script src="src/test.js"></script>
<script src="Visualiser.js"></script>
</HTML>
